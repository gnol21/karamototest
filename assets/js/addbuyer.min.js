$(document).ready((function(){function e(){$("#buyerName").val(""),$("#buyerAddress").val(""),$("#buyerPhone").val(""),$("#buyerEmail").val(""),$("#toNextS").addClass("disabled")}$("#toNextS").addClass("disabled"),$("#userForm").on("submit",(function(e){e.preventDefault();var a={Name:$("#buyerName").val(),Address:$("#buyerAddress").val(),PhoneNumber:$("#buyerPhone").val(),Email:$("#buyerEmail").val(),UserType:"Buyer",DateRegistered:(new Date).toISOString()};$.ajax({url:"https://iptv.givethanksgrocers.com/karamoto/add_user_api.php",type:"POST",contentType:"application/json",data:JSON.stringify(a),success:function(e){var a="string"==typeof e?JSON.parse(e):e;if("Buyer added successfully"===a.message){var s=a.data.Name,r=a.data.UserId;$("#responseMessage").text("Buyer added successfully. Name: "+s),$("#responseModal").modal("show"),$("#buyerName-2").val(s),$("#buyerIDH").val(r),$("#toNextS").removeClass("disabled")}else $("#responseMessage").text(a.message),$("#responseModal").modal("show")},error:function(e){var a=JSON.parse(e.responseText);$("#responseMessage").text(a.message),$("#responseModal").modal("show")}})})),$("#searchInput").on("input",(function(){var a=$(this).val();$.ajax({url:"https://iptv.givethanksgrocers.com/karamoto/add_user_api.php",type:"POST",contentType:"application/json",data:JSON.stringify({action:"search",query:a}),success:function(a){var s;"Search successful"===a.message&&a.data.length>0?(s=a.data[0],$("#buyerIDH").val(s.UserID),$("#buyerName").val(s.Name),$("#buyerName-2").val(s.Name),$("#buyerAddress").val(s.Address),$("#buyerPhone").val(s.PhoneNumber),$("#buyerEmail").val(s.Email),$("#toNextS").removeClass("disabled")):($("#toNextS").addClass("disabled"),e())},error:function(e){var a=JSON.parse(e.responseText);$("#responseMessage").text(a.message),$("#responseModal").modal("show")}})})),$("#toNextSClear").click((function(){e()})),$("#addSale").on("submit",(function(a){a.preventDefault();var s=$("#paymentMethod option:selected").text(),r={VehicleID:$("#vehicleIDH").val(),BuyerID:$("#buyerIDH").val(),SalePrice:$("#priceIDH").val(),SaleDate:$("#SaleDate").val(),PaymentMethod:s};$.ajax({url:"https://iptv.givethanksgrocers.com/karamoto/sales_api.php",type:"POST",contentType:"application/json",data:JSON.stringify(r),success:function(a){var s="string"==typeof a?JSON.parse(a):a;$("#responseMessage").text(s.message),$("#responseModal").modal("show"),"Sale recorded successfully"===s.message&&($("#vehicleIDH").val(""),$("#buyerIDH").val(""),$("#selerIDH").val(""),$("#priceIDH").val(),e())},error:function(e){var a=JSON.parse(e.responseText);$("#responseMessage").text(a.message),$("#responseModal").modal("show")}})}))}));