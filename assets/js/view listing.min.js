$(document).ready((function(){function e(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}$("#listingTable table tbody").empty(),$.ajax({url:"http://localhost/view_listing_api.php",type:"GET",dataType:"json",success:function(t){0!==t.length?(t.forEach((function(t,i){var n=e(t.Price),o=e(t.Mileage),l=`\n                        <tr data-id="${t.VehicleID}">\n                            <td>${i+1}</td>\n                            <td>${t.Make}</td>\n                            <td>${t.Model}</td>\n                            <td>${t.Year}</td>\n                            <td>${o}</td>\n                            <td>${n}</td>\n                            <td>${t.Conditions}</td>\n                            <td><button class="btn btn-primary btn-sm view-details-btn" type="button" style="margin-left: 3px;"><svg class="bi bi-search" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" style="font-size: 16px;">\n    <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"></path>\n</svg></button></td>\n                        </tr>`;$("#listingTable table tbody").append(l)})),$(".view-details-btn").click((function(){!function(t){$.ajax({url:"http://localhost/view_vehicle_api.php?VehicleID="+t,type:"GET",dataType:"json",success:function(t){if(0===t.length)return $("#responseMessage").text("No vehicle details found."),void $("#responseModal").modal("show");var i=t[0];$("#vehicleMake").text(i.Make),$("#vehicleModel").text(i.Model),$("#vehicleYear").text(i.Year),$("#vehicleMileage").text(e(i.Mileage)),$("#vehiclePrice").text(e(i.Price)),$("#vehicleCondition").text(i.Conditions),$("#vehicleVIN").text(i.VIN),$("#vehicleDescription").text(i.Description),$("#vehicleDateListed").text(i.DateListed),$("#vehicleModal").modal("show")},error:function(){console.log("Error fetching vehicle details"),$("#responseMessage").text("Error fetching vehicle details."),$("#responseModal").modal("show")}})}($(this).closest("tr").data("id"))}))):$("#listingTable table tbody").append('<tr><td colspan="8" class="text-center">No listings found.</td></tr>')},error:function(){console.log("Error fetching listing data"),$("#responseMessage").text("Error fetching listing data."),$("#responseModal").modal("show")}})}));